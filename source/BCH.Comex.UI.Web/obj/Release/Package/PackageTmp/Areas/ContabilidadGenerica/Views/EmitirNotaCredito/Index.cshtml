@model BCH.Comex.UI.Web.Areas.ContabilidadGenerica.Models.EmitirNotaCreditoViewModel
@{
    Layout = "~/Areas/ContabilidadGenerica/Views/Shared/_Layout.cshtml";
    ViewBag.Favicon = @Url.Content("~/Content/img/apps/ingreso-asientos-inv.png");
}


<div id="EmitirNotaCredito" class="container">
    <div class="container form-horizontal">
        <h3 class="margin-bottom-triple" id="caption">Nota de Crédito @ViewBag.Caption</h3>
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="form-group">
                        <div class="col-xs-6">
                            <label class="col-sm-0 control-label">Identificación Operación</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-8">
                            <div class="input-group" id="grpNroOperacion">
                                <input type="text" id="Tx_NumOpe_000" maxlength="3" data-inputmask="'mask': '9','repeat': 3, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable:Tx_NumOpe_000.Enabled, value: Tx_NumOpe_000.Text.extend({padConCeros: '3'})" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_001" maxlength="2" data-inputmask="'mask': '9','repeat': 2, 'greedy' : false" class="form-control input-sm" style="width: 60px;" disabled data-bind="value: Cb_Producto.SelectedValue.extend({padConCeros: '2'})" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_002" maxlength="2" data-inputmask="'mask': '9','repeat': 2, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable:Tx_NumOpe_002.Enabled, value: Tx_NumOpe_002.Text.extend({padConCeros: '2'})" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_003" maxlength="3" data-inputmask="'mask': '9','repeat': 3, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable:Tx_NumOpe_003.Enabled, value: Tx_NumOpe_003.Text.extend({padConCeros: '3'})" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_004" maxlength="5" data-inputmask="'mask': '9','repeat': 5, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable:Tx_NumOpe_004.Enabled, value: Tx_NumOpe_004.Text.extend({padConCeros: '5'})" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_005" maxlength="2" data-inputmask="'mask': '9','repeat': 2, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable: (Cb_Producto.SelectedValue() == 17), value: (Cb_Producto.SelectedValue() == 17) ? Tx_NumOpe_005.Text.extend({padConCeros: '2'}) : '00'" />
                                <div class="input-group-addon">-</div>
                                <input type="text" id="Tx_NumOpe_006" maxlength="2" data-inputmask="'mask': '9','repeat': 2, 'greedy' : false" class="form-control input-sm" style="width: 60px;" data-bind="enable: (Cb_Producto.SelectedValue() == 17), value: (Cb_Producto.SelectedValue() == 17) ? Tx_NumOpe_006.Text.extend({padConCeros: '2'}) : '00'" />
                            </div>
                        </div>
                        <div class="col-xs-2">
                            <button type="submit" style="width: 39px; color: #fff;" margin-left:10px" id="btn_ok" name="Command" value="btn_ok" class="btn btn-success input-group-addon" data-bind="click: btn_ok_click">
                                <i class="glyphicon glyphicon-ok"></i>
                            </button>
                        </div>
                        <div class="col-xs-2">
                            <button id="btnAceptar" class="btn btn-primary" disabled="disabled"  style="width:80px;margin-left: -64px;" data-bind="event:{click:btn_aceptar_click}">Aceptar</button>
                            <button class="btn btn-default" style="width:80px" data-bind="event:{click:btn_cancelar_click}">Cancelar</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-6">
                            <select id="Cb_Producto" data-bind="options: Cb_Producto.Items, optionsText: 'Value', optionsValue: 'Data', value: Cb_Producto.SelectedValue" class="form-control"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-6">
                            <label class="col-sm-0 control-label">Información del Cliente</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-2">
                            <label>R.U.T del Cliente</label>
                        </div>
                        <div class=" col-xs-2">
                            <input type="text" id="Tx_RutPrt" class="form-control" style="width: 180px;" data-bind="value: Tx_RutPrt.Text" disabled="disabled" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-2">
                            <label>Nombre del Cliente</label>
                        </div>
                        <div class=" col-xs-4">
                            <input type="text" id="Tx_NomPrt" class="form-control" style="width: 360px;" data-bind="value: Tx_NomPrt.Text" disabled="disabled" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-2">
                            <label>Dirección del Cliente</label>
                        </div>
                        <div class="col-xs-4">
                            <input type="text" id="Tx_DirPrt" class="form-control" style="width: 360px;" data-bind="value: Tx_DirPrt.Text" disabled="disabled" />
                        </div>
                    </div>
                </div>
                <div class="panel panel-default" id="pnlTablaDetalle">
                    <div class="panel-heading">
                        <h2 class="panel-title">Facturas Asociadas a la Operación&nbsp;&nbsp;&nbsp;<span class="badge" id="badge">0</span></h2>
                    </div>
                    <div class="panel-body">
                        <div class="table-responsive">
                            <div class="table-responsive">
                                <table id="tableDetalle" name="tableDetalle" class="table"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>
        var urlBuscar = '@Url.Action("EmitirNotaCredito_BuscarFacturas")';
        var dataFacturas = @Html.Raw(Json.Encode(Model.ListaFacturas));
    </script>
    @Scripts.Render("~/bundles/ContabilidadGenerica/EmitirNotaCredito")
}

